{% extends 'base.html' %}
{% block content %}
<h1>Ø¬Ø²Ø¦ÛŒØ§Øª Ø¨Ø§Ø²ÛŒ</h1>
<p>Ø´Ù†Ø§Ø³Ù‡ Ø¨Ø§Ø²ÛŒ: {{ game.id }}</p>
<p>ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹: {{ game.created_at }}</p>
<a href="{% url 'logs:create' game.id %}">â• Ø§ÙØ²ÙˆØ¯Ù† Ù„Ø§Ú¯ Ø¬Ø¯ÛŒØ¯</a>

<h2>Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù† Ø¨Ø§Ø²ÛŒ</h2>
<ul>
  {% for gp in game_players %}
    <li>ØµÙ†Ø¯Ù„ÛŒ {{ gp.seat_number }} - {{ gp.player.name }} - Ù†Ù‚Ø´: {{ gp.role.name }}</li>
  {% endfor %}
</ul>
<a href="{% url 'actions:add' game.id %}">â• Ø§ÙØ²ÙˆØ¯Ù† Ø§Ú©Ø´Ù†</a>
<h2>Ù„Ø§Ú¯â€ŒÙ‡Ø§</h2>
{% for log in game.log_set.all %}
  <div style="border:1px solid #ccc; margin: 10px; padding:10px;">
    <strong>{{ log.phase|title }} {{ log.round_number }}</strong> | Ø¨Ø§Ø²ÛŒÚ©Ù†: {{ log.game_player.player.name }} (ØµÙ†Ø¯Ù„ÛŒ {{ log.game_player.seat_number }})<br>
    Ø§Ú©Ø´Ù†: {{ log.action|linebreaksbr }}<br>
    {% comment %} <a href="{% url 'logs:delete' log.pk %}">ğŸ—‘ Ø­Ø°Ù</a> {% endcomment %}
  </div>
{% empty %}
  <p>Ù‡ÛŒÚ† Ù„Ø§Ú¯ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
{% endfor %}
<h2>Ø§Ú©Ø´Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²ÛŒ</h2>
{% for action in game.action_set.all %}
  <div style="border:1px dashed #999; margin: 10px; padding:10px;">
    <strong>Ø±ÙˆØ² {{ action.day_number }}</strong> | 
    {{ action.performer.player.name }} (ØµÙ†Ø¯Ù„ÛŒ {{ action.performer.seat_number }}) â†’ 
    {{ action.action_type.name }}
    <br>
    Ù‡Ø¯Ùâ€ŒÙ‡Ø§:
    <ul>
      {% for t in action.targets.all %}
        <li>{{ t.player.name }} (ØµÙ†Ø¯Ù„ÛŒ {{ t.seat_number }})</li>
      {% endfor %}
    </ul>
  </div>
{% empty %}
  <p>Ù‡ÛŒÚ† Ø§Ú©Ø´Ù†ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
{% endfor %}
{% endblock %}
